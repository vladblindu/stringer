{"version":3,"file":"index.modern.js","sources":["../src/helpers.js","../src/index.js"],"sourcesContent":["export const pick = (o, ...keys) =>\n  Object.keys(o).reduce((acc, k) => {\n    if (keys.includes(k)) acc[k] = o[k]\n    return acc\n  }, {})\n","import React from 'react'\nimport urlJoin from 'url-join'\nimport { pick } from './helpers'\n\nexport const StringsContext = React.createContext({})\n\nexport const StringsProvider = ({\n  langs,\n    defaultLang,\n    initialStrings,\n    httpAgent,\n    meta,\n    children\n  }) => {\n  const [state, setState] = React.useState({\n    lang: defaultLang,\n    strings: initialStrings\n  })\n\n  const handleSetState = (lang) => {\n    if (lang === state.lang) return\n    const langUrl = urlJoin('origin://locales', lang + '.json')\n    httpAgent(langUrl)\n      .then((res) => res.json())\n      .then((strings) => {\n        setState({ lang, strings })\n      })\n      .catch((e) => {\n        console.log(e)\n      })\n  }\n\n  const context = {\n    lang: state.lang,\n    setLang: handleSetState,\n    langs,\n    meta,\n    strings: state.strings\n  }\n\n  return (\n    <StringsContext.Provider value={context}>\n      {children}\n    </StringsContext.Provider>\n  )\n}\n\nexport const useStrings = (compName) => {\n  const context = React.useContext(StringsContext)\n  return Object.keys(context.strings)\n    .filter((k) => k.startsWith(compName))\n    .reduce((acc, k) => {\n      // eslint-disable-next-line no-unused-vars\n      const _k = k.split('.')[1]\n      acc[_k] = context.strings[k]\n      return acc\n    }, {})\n}\n\nexport const useLangs = () => {\n  const context = React.useContext(StringsContext)\n  return pick(context, 'lang', 'langs', 'setLang', 'meta')\n}\n"],"names":["pick","o","keys","Object","reduce","acc","k","includes","StringsContext","React","createContext","StringsProvider","langs","defaultLang","initialStrings","httpAgent","meta","children","useState","lang","strings","state","setState","handleSetState","langUrl","urlJoin","then","res","json","e","console","log","context","setLang","useStrings","compName","useContext","filter","startsWith","_k","split","useLangs"],"mappings":"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"}