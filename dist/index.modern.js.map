{"version":3,"file":"index.modern.js","sources":["../src/helpers.js","../src/index.js"],"sourcesContent":["export const pick = (o, ...keys) =>\n  Object.keys(o).reduce((acc, k) => {\n    if (keys.includes(k)) acc[k] = o[k]\n    return acc\n  }, {})\n","import React from 'react'\nimport urlJoin from 'url-join'\nimport { pick } from './helpers'\n\nexport const StringsContext = React.createContext({})\n\nexport const StringsProvider = ({\n                                  langs,\n                                  defaultLang,\n                                  initialStrings,\n                                  httpAgent,\n                                  meta,\n                                  children\n                                }) => {\n  const [state, setState] = React.useState({\n    lang: defaultLang,\n    strings: initialStrings\n  })\n\n  const handleSetState = (lang) => {\n    if (lang === state.lang) return\n    const langUrl = urlJoin('origin://locales', lang + '.json')\n    httpAgent(langUrl)\n      .then((res) => res.json())\n      .then((strings) => {\n        setState({ lang, strings })\n      })\n      .catch((e) => {\n        console.log(e)\n      })\n  }\n\n  const context = {\n    lang: state.lang,\n    setLang: handleSetState,\n    langs,\n    meta,\n    strings: state.strings\n  }\n\n  return (\n    <StringsContext.Provider value={context}>\n      {children}\n    </StringsContext.Provider>\n  )\n}\n\nexport const useStrings = (compName) => {\n  const context = React.useContext(StringsContext)\n  return Object.keys(context.strings)\n    .filter((k) => k.startsWith(compName))\n    .reduce((acc, k) => {\n      // eslint-disable-next-line no-unused-vars\n      const _k = k.split('.')[1]\n      acc[_k] = context.strings[k]\n      return acc\n    }, {})\n}\n\nexport const useLangs = () => {\n  const context = React.useContext(StringsContext)\n  return pick(context, 'lang', 'langs', 'setLang', 'meta')\n}\n"],"names":["pick","o","keys","Object","reduce","acc","k","includes","StringsContext","React","createContext","StringsProvider","langs","defaultLang","initialStrings","httpAgent","meta","children","state","setState","useState","lang","strings","handleSetState","langUrl","urlJoin","then","res","json","catch","e","console","log","context","setLang","useStrings","compName","useContext","filter","startsWith","_k","split","useLangs"],"mappings":";;;AAAO,MAAMA,IAAI,GAAG,CAACC,CAAD,EAAI,GAAGC,IAAP,KAClBC,MAAM,CAACD,IAAP,CAAYD,CAAZ,EAAeG,MAAf,CAAsB,CAACC,GAAD,EAAMC,CAAN,KAAY;AAChC,MAAIJ,IAAI,CAACK,QAAL,CAAcD,CAAd,CAAJ,EAAsBD,GAAG,CAACC,CAAD,CAAH,GAASL,CAAC,CAACK,CAAD,CAAV;AACtB,SAAOD,GAAP;AACD,CAHD,EAGG,EAHH,CADK;;MCIMG,cAAc,GAAGC,KAAK,CAACC,aAAN,CAAoB,EAApB,CAAvB;AAEP,MAAaC,eAAe,GAAG,CAAC;AACEC,EAAAA,KADF;AAEEC,EAAAA,WAFF;AAGEC,EAAAA,cAHF;AAIEC,EAAAA,SAJF;AAKEC,EAAAA,IALF;AAMEC,EAAAA;AANF,CAAD,KAOO;AACpC,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBV,KAAK,CAACW,QAAN,CAAe;AACvCC,IAAAA,IAAI,EAAER,WADiC;AAEvCS,IAAAA,OAAO,EAAER;AAF8B,GAAf,CAA1B;;AAKA,QAAMS,cAAc,GAAIF,IAAD,IAAU;AAC/B,QAAIA,IAAI,KAAKH,KAAK,CAACG,IAAnB,EAAyB;AACzB,UAAMG,OAAO,GAAGC,OAAO,CAAC,kBAAD,EAAqBJ,IAAI,GAAG,OAA5B,CAAvB;AACAN,IAAAA,SAAS,CAACS,OAAD,CAAT,CACGE,IADH,CACSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADjB,EAEGF,IAFH,CAESJ,OAAD,IAAa;AACjBH,MAAAA,QAAQ,CAAC;AAAEE,QAAAA,IAAF;AAAQC,QAAAA;AAAR,OAAD,CAAR;AACD,KAJH,EAKGO,KALH,CAKUC,CAAD,IAAO;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACD,KAPH;AAQD,GAXD;;AAaA,QAAMG,OAAO,GAAG;AACdZ,IAAAA,IAAI,EAAEH,KAAK,CAACG,IADE;AAEda,IAAAA,OAAO,EAAEX,cAFK;AAGdX,IAAAA,KAHc;AAIdI,IAAAA,IAJc;AAKdM,IAAAA,OAAO,EAAEJ,KAAK,CAACI;AALD,GAAhB;AAQA,sBACE,oBAAC,cAAD,CAAgB,QAAhB;AAAyB,IAAA,KAAK,EAAEW;AAAhC,KACGhB,QADH,CADF;AAKD,CAvCM;AAyCP,MAAakB,UAAU,GAAIC,QAAD,IAAc;AACtC,QAAMH,OAAO,GAAGxB,KAAK,CAAC4B,UAAN,CAAiB7B,cAAjB,CAAhB;AACA,SAAOL,MAAM,CAACD,IAAP,CAAY+B,OAAO,CAACX,OAApB,EACJgB,MADI,CACIhC,CAAD,IAAOA,CAAC,CAACiC,UAAF,CAAaH,QAAb,CADV,EAEJhC,MAFI,CAEG,CAACC,GAAD,EAAMC,CAAN,KAAY;AAElB,UAAMkC,EAAE,GAAGlC,CAAC,CAACmC,KAAF,CAAQ,GAAR,EAAa,CAAb,CAAX;AACApC,IAAAA,GAAG,CAACmC,EAAD,CAAH,GAAUP,OAAO,CAACX,OAAR,CAAgBhB,CAAhB,CAAV;AACA,WAAOD,GAAP;AACD,GAPI,EAOF,EAPE,CAAP;AAQD,CAVM;AAYP,MAAaqC,QAAQ,GAAG,MAAM;AAC5B,QAAMT,OAAO,GAAGxB,KAAK,CAAC4B,UAAN,CAAiB7B,cAAjB,CAAhB;AACA,SAAOR,IAAI,CAACiC,OAAD,EAAU,MAAV,EAAkB,OAAlB,EAA2B,SAA3B,EAAsC,MAAtC,CAAX;AACD,CAHM;;;;"}